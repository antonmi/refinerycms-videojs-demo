<label>Files</label>

<% if action_name =~ /(edit)|(update)/ %>

    <%= f.fields_for :video_files do |v| %>
        <div class='field'>
          <label>(<%= v.object.mime_type %>)</label>
          <%= link_to(t('.download_current'), v.object.url,
                      :title => v.object.file_name)  %>
          <em><%= t('.or') %> </em><%= t('.replace') %>
          <%= v.file_field :file %>
          <%= link_to refinery_icon_tag("delete.png"), refinery.videos_admin_video_file_path(v.object),
                      :class => "cancel confirm-delete",
                      :title => t('.delete'),
                      :confirm => t('message', :scope => 'refinery.admin.delete', :title => v.object.file_name),
                      :method => :delete %>
        </div>
    <% end %>

    <% (@mime_types - @video.video_files.map(&:file_mime_type)).each_with_index do |mime_type, index| %>
        <div class='field'>
          <label>(<%= mime_type %>)</label>
          <% number = @video.video_files.count - index + 1 %>
          <input id="video_video_files_attributes_<%= number %>_file" name="video[video_files_attributes][<%= number %>][file]" type="file">
        </div>
    <% end %>

<% else %>

    <% @video.video_files.build %>
    <% @mime_types.each do |mime_type| %>
        <%= f.fields_for :video_files do |v| %>
            <div class='field'>
              <label>(<%= mime_type %>)</label>
              <%= v.file_field :file%>
            </div>
        <% end %>
    <% end  %>

<% end %>


<div class='field' id='maximum_file_size'>
  <label>
    <%= t('.maximum_file_size', :bytes => number_to_human_size(Refinery::Videos.max_file_size)) %>
  </label>
</div>
